schema: '2.0'
stages:
  featurize:
    cmd: python src/pipelines/featurize.py --config=params.yaml
    deps:
    - path: ../data/raw/iris.csv
      hash: md5
      md5: 4224576f0267bf88902f87f0f6200967
      size: 2757
    - path: ../model_a/models/model-a.joblib
      hash: md5
      md5: ca8525d73391cd993a6cdd5cbcfc10bf
      size: 4023
    - path: ../model_b/models/model-b.joblib
      hash: md5
      md5: d4834868bad0d7cf98b53403de304aaf
      size: 7743
    - path: src/pipelines/featurize.py
      hash: md5
      md5: c11239235d0706481a7cd4b9bf4c44cf
      size: 1809
    params:
      params.yaml:
        base:
          project: mono-1-model-c
          dir_data_raw: ../data/raw
          dir_data_processed: data/processed
          dir_models: models
          dir_reports: reports
          random_state: 42
        featurize:
          features_path: model-c-featured_iris.csv
          target_column: target
          dependencies:
            model_a: model-a.joblib
            model_b: model-b.joblib
    outs:
    - path: data/processed/model-c-featured_iris.csv
      hash: md5
      md5: 35fe22ce12edc57edb809e7ff7a9f214
      size: 7876
  data_split:
    cmd: python src/pipelines/data_split.py --config=params.yaml
    deps:
    - path: data/processed/model-c-featured_iris.csv
      hash: md5
      md5: 35fe22ce12edc57edb809e7ff7a9f214
      size: 7876
    - path: src/pipelines/data_split.py
      hash: md5
      md5: 4fa780a3f8adf2c7ee7606912fdbbf7e
      size: 1284
    params:
      params.yaml:
        base:
          project: mono-1-model-c
          dir_data_raw: ../data/raw
          dir_data_processed: data/processed
          dir_models: models
          dir_reports: reports
          random_state: 42
        data_split:
          train_path: model-c-train_iris.csv
          test_path: model-c-test_iris.csv
          test_size: 0.3
    outs:
    - path: data/processed/model-c-test_iris.csv
      hash: md5
      md5: fedb85156ca5f06cf8352054a13723f3
      size: 2336
    - path: data/processed/model-c-train_iris.csv
      hash: md5
      md5: 273791489277203d01faa490fa384a1f
      size: 5512
  train:
    cmd: python src/pipelines/train.py --config=params.yaml
    deps:
    - path: data/processed/model-c-train_iris.csv
      hash: md5
      md5: 273791489277203d01faa490fa384a1f
      size: 5512
    - path: src/pipelines/train.py
      hash: md5
      md5: 4dd0377a03e3149f350c53e83a825580
      size: 1258
    params:
      params.yaml:
        base:
          project: mono-1-model-c
          dir_data_raw: ../data/raw
          dir_data_processed: data/processed
          dir_models: models
          dir_reports: reports
          random_state: 42
        train:
          model_name: model-c.joblib
          cv: 3
          estimator_name: logreg
          estimators:
            logreg:
              param_grid:
                C:
                - 1
                max_iter:
                - 100
                solver:
                - lbfgs
                multi_class:
                - multinomial
    outs:
    - path: models/model-c.joblib
      hash: md5
      md5: eac044ce540b70d47de6b1e8376822e8
      size: 3747
  evaluate:
    cmd: python src/pipelines/evaluate.py --config=params.yaml
    deps:
    - path: data/processed/model-c-test_iris.csv
      hash: md5
      md5: fedb85156ca5f06cf8352054a13723f3
      size: 2336
    - path: models/model-c.joblib
      hash: md5
      md5: eac044ce540b70d47de6b1e8376822e8
      size: 3747
    - path: src/pipelines/evaluate.py
      hash: md5
      md5: a764e7d05bb8661445ccdbc664bb5b74
      size: 2381
    params:
      params.yaml:
        base:
          project: mono-1-model-c
          dir_data_raw: ../data/raw
          dir_data_processed: data/processed
          dir_models: models
          dir_reports: reports
          random_state: 42
        data_split.test_path: model-c-test_iris.csv
        evaluate:
          metrics_file: model-c-metrics.json
          confusion_matrix_png: model-c-confusion_matrix.png
          plots_file: model-c-classess.csv
        featurize.target_column: target
    outs:
    - path: reports/model-c-classess.csv
      hash: md5
      md5: b0e4ccad07170bdf7883aacf224c64d3
      size: 829
    - path: reports/model-c-confusion_matrix.png
      hash: md5
      md5: f992e0e0492888226068598a4d68c318
      size: 27668
    - path: reports/model-c-metrics.json
      hash: md5
      md5: 3329ba1a6b18407f725a1e25a5500560
      size: 17
