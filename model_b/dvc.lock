schema: '2.0'
stages:
  featurize:
    cmd: python src/pipelines/featurize.py --config=params.yaml
    deps:
    - path: ../data/raw/iris.csv
      hash: md5
      md5: 4224576f0267bf88902f87f0f6200967
      size: 2757
    - path: src/pipelines/featurize.py
      hash: md5
      md5: b369e9c3ef33ffb61d86367a708a5aed
      size: 956
    params:
      params.yaml:
        base:
          project: mono-1-model-b
          dir_data_raw: ../data/raw
          dir_data_processed: data/processed
          dir_models: models
          dir_reports: reports
          random_state: 42
        featurize:
          features_path: model-b-featured_iris.csv
          target_column: target
    outs:
    - path: data/processed/model-b-featured_iris.csv
      hash: md5
      md5: 5d03a1564b3038fc35a842f8e4bde491
      size: 7260
  data_split:
    cmd: python src/pipelines/data_split.py --config=params.yaml
    deps:
    - path: data/processed/model-b-featured_iris.csv
      hash: md5
      md5: 5d03a1564b3038fc35a842f8e4bde491
      size: 7260
    - path: src/pipelines/data_split.py
      hash: md5
      md5: 4fa780a3f8adf2c7ee7606912fdbbf7e
      size: 1284
    params:
      params.yaml:
        base:
          project: mono-1-model-b
          dir_data_raw: ../data/raw
          dir_data_processed: data/processed
          dir_models: models
          dir_reports: reports
          random_state: 42
        data_split:
          train_path: model-b-train_iris.csv
          test_path: model-b-test_iris.csv
          test_size: 0.2
    outs:
    - path: data/processed/model-b-test_iris.csv
      hash: md5
      md5: b5e45593a772fc66629488e1806505c4
      size: 1492
    - path: data/processed/model-b-train_iris.csv
      hash: md5
      md5: ed8a7e5ba0a211251bdee6c498fe3eb4
      size: 5724
  train:
    cmd: python src/pipelines/train.py --config=params.yaml
    deps:
    - path: data/processed/model-b-train_iris.csv
      hash: md5
      md5: ed8a7e5ba0a211251bdee6c498fe3eb4
      size: 5724
    - path: src/pipelines/train.py
      hash: md5
      md5: c0270c3aaf3a265821d9487e7a7bbb19
      size: 1258
    params:
      params.yaml:
        base:
          project: mono-1-model-b
          dir_data_raw: ../data/raw
          dir_data_processed: data/processed
          dir_models: models
          dir_reports: reports
          random_state: 42
        train:
          model_name: model-b.joblib
          cv: 5
          estimator_name: svm
          estimators:
            svm:
              param_grid:
                C:
                - 10
                - 100
                kernel:
                - rbf
                - linear
                gamma:
                - scale
                degree:
                - 5
                - 10
    outs:
    - path: models/model-b.joblib
      hash: md5
      md5: d4834868bad0d7cf98b53403de304aaf
      size: 7743
  evaluate:
    cmd: python src/pipelines/evaluate.py --config=params.yaml
    deps:
    - path: data/processed/model-b-test_iris.csv
      hash: md5
      md5: b5e45593a772fc66629488e1806505c4
      size: 1492
    - path: models/model-b.joblib
      hash: md5
      md5: d4834868bad0d7cf98b53403de304aaf
      size: 7743
    - path: src/pipelines/evaluate.py
      hash: md5
      md5: a764e7d05bb8661445ccdbc664bb5b74
      size: 2381
    params:
      params.yaml:
        base:
          project: mono-1-model-b
          dir_data_raw: ../data/raw
          dir_data_processed: data/processed
          dir_models: models
          dir_reports: reports
          random_state: 42
        data_split.test_path: model-b-test_iris.csv
        evaluate:
          metrics_file: model-b-metrics.json
          confusion_matrix_png: model-b-confusion_matrix.png
          plots_file: model-b-classess.csv
        featurize.target_column: target
    outs:
    - path: reports/model-b-classess.csv
      hash: md5
      md5: a1d42d276cf0a044caf4fcd4c2715b5c
      size: 575
    - path: reports/model-b-confusion_matrix.png
      hash: md5
      md5: c31cba0d12d20d65f918add340f255d3
      size: 24920
    - path: reports/model-b-metrics.json
      hash: md5
      md5: 3329ba1a6b18407f725a1e25a5500560
      size: 17
