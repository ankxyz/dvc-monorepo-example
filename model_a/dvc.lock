schema: '2.0'
stages:
  featurize:
    cmd: python src/pipelines/featurize.py --config=params.yaml
    deps:
    - path: ../data/raw/iris.csv
      hash: md5
      md5: 4224576f0267bf88902f87f0f6200967
      size: 2757
    - path: src/pipelines/featurize.py
      hash: md5
      md5: b369e9c3ef33ffb61d86367a708a5aed
      size: 956
    params:
      params.yaml:
        base:
          project: mono-1-model-a
          dir_data_raw: ../data/raw
          dir_data_processed: data/processed
          dir_models: models
          dir_reports: reports
          random_state: 42
        featurize:
          features_path: featured_iris.csv
          target_column: target
    outs:
    - path: data/processed/featured_iris.csv
      hash: md5
      md5: 5d03a1564b3038fc35a842f8e4bde491
      size: 7260
  data_split:
    cmd: python src/pipelines/data_split.py --config=params.yaml
    deps:
    - path: data/processed/featured_iris.csv
      hash: md5
      md5: 5d03a1564b3038fc35a842f8e4bde491
      size: 7260
    - path: src/pipelines/data_split.py
      hash: md5
      md5: 4fa780a3f8adf2c7ee7606912fdbbf7e
      size: 1284
    params:
      params.yaml:
        base:
          project: mono-1-model-a
          dir_data_raw: ../data/raw
          dir_data_processed: data/processed
          dir_models: models
          dir_reports: reports
          random_state: 42
        data_split:
          train_path: model-a-train_iris.csv
          test_path: model-a-test_iris.csv
          test_size: 0.3
    outs:
    - path: data/processed/model-a-test_iris.csv
      hash: md5
      md5: a4062ba6421285181f76cad57ab08d43
      size: 2140
    - path: data/processed/model-a-train_iris.csv
      hash: md5
      md5: df48a3b56d578d45d0794798ad2cd31d
      size: 5076
  train:
    cmd: python src/pipelines/train.py --config=params.yaml
    deps:
    - path: data/processed/model-a-train_iris.csv
      hash: md5
      md5: df48a3b56d578d45d0794798ad2cd31d
      size: 5076
    - path: src/pipelines/train.py
      hash: md5
      md5: cbd624ddb3bf1051c111f7ecc2607f5e
      size: 1258
    params:
      params.yaml:
        base:
          project: mono-1-model-a
          dir_data_raw: ../data/raw
          dir_data_processed: data/processed
          dir_models: models
          dir_reports: reports
          random_state: 42
        train:
          model_name: model-a.joblib
          cv: 5
          estimator_name: logreg
          estimators:
            logreg:
              param_grid:
                C:
                - 0.01
                - 0.1
                max_iter:
                - 200
                solver:
                - lbfgs
                multi_class:
                - multinomial
    outs:
    - path: models/model-a.joblib
      hash: md5
      md5: ca8525d73391cd993a6cdd5cbcfc10bf
      size: 4023
  evaluate:
    cmd: python src/pipelines/evaluate.py --config=params.yaml
    deps:
    - path: data/processed/model-a-test_iris.csv
      hash: md5
      md5: a4062ba6421285181f76cad57ab08d43
      size: 2140
    - path: models/model-a.joblib
      hash: md5
      md5: ca8525d73391cd993a6cdd5cbcfc10bf
      size: 4023
    - path: src/pipelines/evaluate.py
      hash: md5
      md5: a764e7d05bb8661445ccdbc664bb5b74
      size: 2381
    params:
      params.yaml:
        base:
          project: mono-1-model-a
          dir_data_raw: ../data/raw
          dir_data_processed: data/processed
          dir_models: models
          dir_reports: reports
          random_state: 42
        data_split.test_path: model-a-test_iris.csv
        evaluate:
          metrics_file: model-a-metrics.json
          confusion_matrix_png: model-a-confusion_matrix.png
          plots_file: classess.csv
        featurize.target_column: target
    outs:
    - path: reports/classess.csv
      hash: md5
      md5: a4fe980ecd7fc41d99ec73f9d635cb2d
      size: 828
    - path: reports/model-a-confusion_matrix.png
      hash: md5
      md5: 4c14d2e3830c6a6340703a24fc13b80c
      size: 27712
    - path: reports/model-a-metrics.json
      hash: md5
      md5: e01c836b389fd376ae3f6fe7f19f3cdd
      size: 31
